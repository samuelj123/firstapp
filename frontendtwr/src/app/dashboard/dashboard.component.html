<div class="container">
  <h2>Dashboard</h2>
  <h3>Immediate Attention</h3>
  <div *ngIf='userrole!==undefined'>
    <div *ngIf='userrole.includes("ID")'>
    </div>

    <div class='grid' *ngIf='userrole.includes("CEO")'>
      <div class='card' *ngIf='latetasks!==null'>
        <p>Late Reports</p>
        <div *ngFor='let x of latetasks'>
          <p>Tasks that missed Deadline</p>
          <p>{{x.task}}</p>
        </div>
      </div>
      <div class='card activeprojects' *ngIf='activeprojects!==undefined'>
        <h3>Active Projects</h3>
        <h2><strong>{{activeprojects.length}}</strong>/{{projects.length}}</h2>
        <!-- <p>Progress of Each Active Project wrt tasks</p>
        <div *ngFor='let x of activeprojects'>
          <p>{{x.name}}</p>
          <div *ngFor='let y of x.kpis'>
            <div *ngFor='let z of y.tasks'>
              <p>{{z.task}}</p>
            </div>
          </div>
        </div> -->
      </div>
      <div class='card registeredusers' *ngIf='activeprojects!==undefined'>
        <h3>Staff Overview</h3>
        <div *ngFor='let x of countryusers'>
          <p [class.notask]='x.tasks.length===0' 
            [class.threetask]="x.tasks.length<=3 && x.tasks.length>0" 
            [class.fivetask]='x.tasks.length<=5 && x.tasks.length>3' 
            [class.seventask]='x.tasks.length<=7 && x.tasks.length>5'
          [class.fivetask]='x.tasks.length>7'>
          {{x.firstname}} {{x.lastname}}</p>
          <!-- <div *ngFor='let y of x.tasks'>
            <p>{{y.task}}</p>
          </div> -->
        </div>
      </div>

      <div class='card' *ngIf='upcomingtasks!==undefined'>
        <p>Upcoming Tasks</p>
        <div *ngFor='let x of upcomingtasks'>
          <p>{{x.task}} - {{x.projectstartdate+x.enddate | date}}</p>
        </div>
      </div>
      <!-- <p>Upcoming Reports</p> -->

    </div>


    <div *ngIf='userrole.includes("EXECUTIVE")'>
    </div>

    <h3>My Tasks</h3>
    <div *ngIf='user!==undefined'>
      <div *ngFor='let x of usertasks'>
        <p>{{x.task}} | Deadline: {{x.realdeadline | date}}</p>
      </div>
    </div>

    <h3>Active Projects</h3>
    <div *ngIf='userrole.includes("ID")'></div>
    <div *ngIf='userrole.includes("CEO")'>
      <div *ngFor='let x of activeprojects'>
        {{x.name}}
        {{x.startdate}}
      </div>
    </div>
    <div *ngIf='userrole.includes("EXECUTIVE")'></div>

    <h3>People Groups</h3>
    <div *ngIf='userrole.includes("ID")'></div>
    <div *ngIf='userrole.includes("CEO")'></div>
    <div *ngIf='userrole.includes("EXECUTIVE")'></div>

    <h3>Planned Projects</h3>
    <div *ngIf='userrole.includes("ID")'></div>
    <div *ngIf='userrole.includes("CEO")'>
      <div *ngFor='let x of pendingprojects'>
        <p>{{x.name}}</p>
        <p>{{x.startdate}}</p>
      </div>
    </div>
    <div *ngIf='userrole.includes("EXECUTIVE")'></div>
    <div *ngIf='userrole.includes("CEO")'>
      <h3>Draft Projects</h3>
      <div *ngFor='let x of draftprojects'>
        <p>{{x.name}}</p>
        <p>{{x.startdate}}</p>
      </div>
    </div>
    <div *ngIf='userrole.includes("EXECUTIVE")'></div>

  </div>
</div>